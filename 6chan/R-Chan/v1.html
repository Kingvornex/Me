<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R-Chan - Hybrid Forum</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        
        .quote-text {
            color: #00aa00;
            font-family: 'Roboto Mono', monospace;
            white-space: pre-wrap;
        }
        
        .post-container {
            transition: all 0.2s ease-in-out;
        }
        
        .post-container:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .thread-line {
            border-left: 2px solid #e5e7eb;
            padding-left: 16px;
            margin-left: 32px;
        }
        
        .upvote-btn.active {
            color: #ff4500;
        }
        
        .downvote-btn.active {
            color: #7193ff;
        }
        
        .reddit-header {
            background-color: white;
            border-bottom: 1px solid #eaeaea;
        }
        
        .chan-post {
            background-color: white;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .chan-thread {
            background-color: #f9f9f9;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-right: 4px;
        }
        
        .tag-reddit {
            background-color: #ff4500;
            color: white;
        }
        
        .tag-4chan {
            background-color: #00aa00;
            color: white;
        }
        
        .dark-mode {
            background-color: #121212;
            color: white;
        }
        
        .dark-mode .reddit-header {
            background-color: #1e1e1e;
            border-bottom: 1px solid #333;
        }
        
        .dark-mode .post-container,
        .dark-mode .chan-post,
        .dark-mode .chan-thread {
            background-color: #1e1e1e;
        }
        
        .dark-mode .thread-line {
            border-left-color: #444;
        }
        
        .dark-mode .tag-reddit {
            background-color: #ff5722;
        }
        
        .dark-mode .tag-4chan {
            background-color: #4caf50;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Header Component
        const Header = () => {
            const [darkMode, setDarkMode] = useState(false);
            const [notificationsOpen, setNotificationsOpen] = useState(false);
            
            return (
                <header className={`${darkMode ? 'dark-mode' : ''}`}>
                    <div className="container mx-auto flex items-center justify-between py-3 px-4">
                        <div className="flex items-center space-x-6">
                            <h1 className="text-xl font-bold text-gray-800">R-Chan</h1>
                            <nav className="hidden md:flex space-x-4">
                                <a href="#" className="text-gray-600 hover:text-blue-600">Home</a>
                                <a href="#" className="text-gray-600 hover:text-blue-600">Popular</a>
                                <a href="#" className="text-gray-600 hover:text-blue-600">New</a>
                                <a href="#" className="text-gray-600 hover:text-blue-600">Random</a>
                            </nav>
                        </div>
                        <div className="flex items-center space-x-4">
                            <button 
                                onClick={() => setDarkMode(!darkMode)}
                                className="text-gray-600 hover:text-gray-900"
                            >
                                <i className={`fas ${darkMode ? 'fa-sun' : 'fa-moon'}`}></i>
                            </button>
                            <div className="relative">
                                <button 
                                    onClick={() => setNotificationsOpen(!notificationsOpen)}
                                    className="text-gray-600 hover:text-gray-900 relative"
                                >
                                    <i className="fas fa-bell"></i>
                                    <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">3</span>
                                </button>
                                {notificationsOpen && (
                                    <div className="absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-md py-2 z-10">
                                        <div className="px-4 py-2 border-b">
                                            <h3 className="font-medium">Notifications</h3>
                                        </div>
                                        <div className="px-4 py-2">
                                            <p className="text-sm text-gray-600">You have no new notifications.</p>
                                        </div>
                                    </div>
                                )}
                            </div>
                            <button className="bg-blue-600 text-white px-4 py-1 rounded-md text-sm">Login</button>
                            <button className="border border-gray-300 text-gray-600 px-4 py-1 rounded-md text-sm">Register</button>
                        </div>
                    </div>
                </header>
            );
        };

        // Voting Buttons Component
        const VotingButtons = ({ votes, userVote, onUpvote, onDownvote }) => {
            return (
                <div className="flex flex-col items-center mr-4 w-12">
                    <button 
                        onClick={onUpvote}
                        className={`upvote-btn ${userVote === 1 ? 'active' : ''} text-xl`}
                    >
                        <i className="fas fa-chevron-up"></i>
                    </button>
                    <span className="my-1 font-medium">{votes}</span>
                    <button 
                        onClick={onDownvote}
                        className={`downvote-btn ${userVote === -1 ? 'active' : ''} text-xl`}
                    >
                        <i className="fas fa-chevron-down"></i>
                    </button>
                </div>
            );
        };

        // Comment Component
        const Comment = ({ comment }) => {
            return (
                <div className="thread-line pb-4">
                    <div className="mb-2">
                        <span className="font-medium text-gray-800">{comment.author}</span>
                        <span className="text-gray-500 ml-2 text-sm">{comment.timeAgo}</span>
                    </div>
                    <p className="text-gray-700">{comment.text}</p>
                </div>
            );
        };

        // Post Component
        const Post = ({ post }) => {
            const [votes, setVotes] = useState(post.votes);
            const [userVote, setUserVote] = useState(post.userVote || 0);
            const [showComments, setShowComments] = useState(post.showComments || false);
            const [imageExpanded, setImageExpanded] = useState(false);
            
            const handleUpvote = () => {
                if (userVote === 1) {
                    setVotes(votes - 1);
                    setUserVote(0);
                } else {
                    setVotes(userVote === -1 ? votes + 2 : votes + 1);
                    setUserVote(1);
                }
            };
            
            const handleDownvote = () => {
                if (userVote === -1) {
                    setVotes(votes + 1);
                    setUserVote(0);
                } else {
                    setVotes(userVote === 1 ? votes - 2 : votes - 1);
                    setUserVote(-1);
                }
            };
            
            return (
                <div className="post-container bg-white rounded-lg p-4 mb-4">
                    <div className="flex">
                        <VotingButtons 
                            votes={votes} 
                            userVote={userVote}
                            onUpvote={handleUpvote}
                            onDownvote={handleDownvote}
                        />
                        <div className="flex-1">
                            <div className="mb-2">
                                <span className="font-semibold text-gray-800">{post.author}</span>
                                <span className="text-gray-500 ml-2 text-sm">{post.timeAgo}</span>
                                {post.anonymous && (
                                    <span className="ml-2 text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full">Anonymous</span>
                                )}
                                {post.tags && (
                                    <div className="mt-1">
                                        {post.tags.map((tag, idx) => (
                                            <span key={idx} className={`tag tag-${tag.type}`}>{tag.name}</span>
                                        ))}
                                    </div>
                                )}
                            </div>
                            <div className="mb-3">
                                {post.content.map((line, index) => (
                                    line.startsWith('>') ? 
                                        <p key={index} className="quote-text my-1">{line}</p> :
                                        <p key={index} className="my-1">{line}</p>
                                ))}
                            </div>
                            {post.image && (
                                <div className="mb-3">
                                    <img 
                                        src={post.image} 
                                        alt="Post image" 
                                        className={`rounded-md max-w-full h-auto mb-3 cursor-pointer ${imageExpanded ? 'max-h-full' : 'max-h-48 object-cover'}`}
                                        onClick={() => setImageExpanded(!imageExpanded)}
                                    />
                                </div>
                            )}
                            <div className="flex items-center space-x-4 text-gray-500 text-sm">
                                <button 
                                    className="hover:text-blue-600"
                                    onClick={() => setShowComments(!showComments)}
                                >
                                    <i className="far fa-comment"></i> {post.comments}
                                </button>
                                <button className="hover:text-red-600"><i className="far fa-heart"></i></button>
                                <button className="hover:text-green-600"><i className="fas fa-share"></i></button>
                            </div>
                        </div>
                    </div>
                    
                    {/* Comments Section */}
                    {showComments && (
                        <div className="mt-4 pl-16">
                            {post.commentsList.map((comment, idx) => (
                                <Comment key={idx} comment={comment} />
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Thread Component (4chan style)
        const Thread = ({ thread }) => {
            const [expanded, setExpanded] = useState(thread.expanded || false);
            const [imageExpanded, setImageExpanded] = useState(false);
            
            return (
                <div className="chan-thread mb-4">
                    <div 
                        className="p-4 cursor-pointer"
                        onClick={() => setExpanded(!expanded)}
                    >
                        <div className="flex">
                            <div className="w-12 flex flex-col items-center mr-4">
                                <span className="text-xl">+</span>
                                <span className="my-1 font-medium">{thread.replies}</span>
                                <span className="text-xl">-</span>
                            </div>
                            <div className="flex-1">
                                <div className="mb-2">
                                    <span className="font-semibold text-gray-800">{thread.author}</span>
                                    <span className="text-gray-500 ml-2 text-sm">{thread.timeAgo}</span>
                                    {thread.sage && (
                                        <span className="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">Sage</span>
                                    )}
                                </div>
                                <div className="mb-3">
                                    {thread.content.map((line, index) => (
                                        line.startsWith('>') ? 
                                            <p key={index} className="quote-text my-1">{line}</p> :
                                            <p key={index} className="my-1">{line}</p>
                                    ))}
                                </div>
                                {thread.image && (
                                    <div className="mb-3">
                                        <img 
                                            src={thread.image} 
                                            alt="Thread image" 
                                            className={`rounded-md max-w-full h-auto mb-3 cursor-pointer ${imageExpanded ? 'max-h-full' : 'max-h-48 object-cover'}`}
                                            onClick={() => setImageExpanded(!imageExpanded)}
                                        />
                                    </div>
                                )}
                                <div className="flex items-center space-x-4 text-gray-500 text-sm">
                                    <span>{thread.replies} replies</span>
                                    <span>{thread.views} views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Replies Section */}
                    {expanded && (
                        <div className="pl-16 pr-4 pb-4">
                            {thread.repliesList.map((reply, idx) => (
                                <div key={idx} className="thread-line pb-4">
                                    <div className="mb-2">
                                        <span className="font-medium text-gray-800">{reply.author}</span>
                                        <span className="text-gray-500 ml-2 text-sm">{reply.timeAgo}</span>
                                    </div>
                                    <p className="text-gray-700">{reply.text}</p>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Poll Component
        const Poll = ({ poll }) => {
            const [selectedOption, setSelectedOption] = useState(null);
            
            return (
                <div className="bg-white rounded-lg p-4 mb-4">
                    <div className="mb-4">
                        <h3 className="font-semibold text-lg mb-2">{poll.question}</h3>
                        <div className="space-y-2">
                            {poll.options.map((option, idx) => (
                                <div key={idx} className="flex items-center">
                                    <input 
                                        type="radio" 
                                        id={`option-${idx}`} 
                                        name="poll-option" 
                                        checked={selectedOption === idx}
                                        onChange={() => setSelectedOption(idx)}
                                        className="mr-2"
                                    />
                                    <label htmlFor={`option-${idx}`} className="flex-grow">{option}</label>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div className="flex justify-end">
                        <button className="bg-blue-600 text-white px-4 py-2 rounded-md text-sm">Vote</button>
                    </div>
                </div>
            );
        };

        // New Post Form Component
        const NewPostForm = () => {
            const [anonymous, setAnonymous] = useState(false);
            const [content, setContent] = useState("");
            const [is4chanMode, setIs4chanMode] = useState(false);
            const [postType, setPostType] = useState("text");
            
            return (
                <div className="bg-white rounded-lg p-4 mb-6">
                    <div className="flex items-center mb-4">
                        <input 
                            type="radio" 
                            id="reddit-mode" 
                            name="mode" 
                            checked={!is4chanMode}
                            onChange={() => setIs4chanMode(false)}
                            className="mr-2"
                        />
                        <label htmlFor="reddit-mode" className="text-gray-700 mr-6">Reddit Mode</label>
                        
                        <input 
                            type="radio" 
                            id="4chan-mode" 
                            name="mode" 
                            checked={is4chanMode}
                            onChange={() => setIs4chanMode(true)}
                            className="mr-2"
                        />
                        <label htmlFor="4chan-mode" className="text-gray-700">4chan Mode</label>
                    </div>
                    
                    <div className="flex items-center mb-4">
                        <input 
                            type="checkbox" 
                            id="anonymous" 
                            checked={anonymous}
                            onChange={() => setAnonymous(!anonymous)}
                            className="mr-2"
                        />
                        <label htmlFor="anonymous" className="text-gray-700">Post as Anonymous</label>
                    </div>
                    
                    <div className="flex space-x-4 mb-4">
                        <button 
                            className={`px-4 py-2 rounded-md text-sm ${postType === "text" ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-700"}`}
                            onClick={() => setPostType("text")}
                        >
                            Text
                        </button>
                        <button 
                            className={`px-4 py-2 rounded-md text-sm ${postType === "poll" ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-700"}`}
                            onClick={() => setPostType("poll")}
                        >
                            Poll
                        </button>
                        <button 
                            className={`px-4 py-2 rounded-md text-sm ${postType === "link" ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-700"}`}
                            onClick={() => setPostType("link")}
                        >
                            Link
                        </button>
                    </div>
                    
                    <textarea 
                        className="w-full border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        rows="4"
                        placeholder={is4chanMode ? "Be me\
Stumble upon this new site\
It's actually kinda nice" : "What's on your mind?..."}
                        value={content}
                        onChange={(e) => setContent(e.target.value)}
                    ></textarea>
                    
                    <div className="flex justify-end mt-2">
                        <button className="bg-blue-600 text-white px-4 py-2 rounded-md text-sm">Submit Post</button>
                    </div>
                </div>
            );
        };

        // User Profile Component
        const UserProfile = () => {
            return (
                <div className="bg-white rounded-lg p-4 mb-6">
                    <div className="flex items-center mb-4">
                        <img src="https://picsum.photos/seed/user123/80/80.jpg" alt="Profile" className="w-16 h-16 rounded-full mr-4" />
                        <div>
                            <h3 className="font-semibold text-lg">u/myusername</h3>
                            <p className="text-gray-600">Member since Jan 2023</p>
                        </div>
                    </div>
                    <div className="border-t pt-4">
                        <h4 className="font-medium mb-2">Recent Activity</h4>
                        <ul className="space-y-2">
                            <li className="flex justify-between">
                                <span>Posted in r/technology</span>
                                <span className="text-gray-500">2 hours ago</span>
                            </li>
                            <li className="flex justify-between">
                                <span>Voted in poll: "Best programming language"</span>
                                <span className="text-gray-500">1 day ago</span>
                            </li>
                            <li className="flex justify-between">
                                <span>Replied to thread</span>
                                <span className="text-gray-500">3 days ago</span>
                            </li>
                        </ul>
                    </div>
                </div>
            );
        };

        // Search Bar Component
        const SearchBar = () => {
            const [query, setQuery] = useState("");
            
            return (
                <div className="relative mb-6">
                    <input 
                        type="text" 
                        placeholder="Search posts, threads, and communities..." 
                        className="w-full border border-gray-300 rounded-md py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        value={query}
                        onChange={(e) => setQuery(e.target.value)}
                    />
                    <button className="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400">
                        <i className="fas fa-search"></i>
                    </button>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const posts = [
                {
                    author: "u/r_user",
                    timeAgo: "2 hours ago",
                    anonymous: false,
                    content: ["This is a sample post combining R and chan elements.", "Here we have voting system like R...", "> But also anonymous posting capabilities like chan!"],
                    image: null,
                    votes: 42,
                    userVote: 0,
                    comments: 23,
                    showComments: true,
                    commentsList: [
                        {
                            author: "u/4chan_anon",
                            timeAgo: "1 hour ago",
                            text: "This hybrid concept is pretty cool ngl"
                        },
                        {
                            author: "u/r_mod",
                            timeAgo: "45 minutes ago",
                            text: "We should implement more 4chan features"
                        }
                    ],
                    tags: [{type: "r", name: "Technology"}, {type: "Chan", name: "Memes"}]
                },
                {
                    author: "Anonymous",
                    timeAgo: "5 hours ago",
                    anonymous: true,
                    content: ["> Be me", "> Stumble upon this new site", "> It's actually kinda nice"],
                    image: "https://picsum.photos/seed/anon123/400/200.jpg",
                    votes: 128,
                    userVote: 0,
                    comments: 89,
                    showComments: false
                },
                {
                    author: "u/hybrid_enthusiast",
                    timeAgo: "1 day ago",
                    anonymous: false,
                    content: ["What do you guys think about mixing R and chan?", "Pros:", "- Best of both worlds", "- More engaging community"],
                    image: null,
                    votes: 67,
                    userVote: 0,
                    comments: 45,
                    showComments: true,
                    commentsList: [
                        {
                            author: "u/old_school",
                            timeAgo: "20 hours ago",
                            text: "It's not the same without anonymity"
                        }
                    ]
                }
            ];
            
            const threads = [
                {
                    author: "Anonymous",
                    timeAgo: "3 hours ago",
                    sage: true,
                    content: ["> Be me", "> Go to R-Chan", "> See this thread", "> Decide to reply"],
                    image: "https://picsum.photos/seed/thread1/300/150.jpg",
                    replies: 17,
                    views: 342,
                    expanded: false,
                    repliesList: [
                        {
                            author: "Anonymous",
                            timeAgo: "2 hours ago",
                            text: "Nice thread bro"
                        },
                        {
                            author: "Anonymous",
                            timeAgo: "1 hour ago",
                            text: "Thanks m8"
                        }
                    ]
                },
                {
                    author: "Anonymous",
                    timeAgo: "1 day ago",
                    sage: false,
                    content: ["> What is the meaning of life?", "> Some say 42", "> Others say it's subjective"],
                    image: null,
                    replies: 42,
                    views: 512,
                    expanded: true,
                    repliesList: [
                        {
                            author: "Anonymous",
                            timeAgo: "22 hours ago",
                            text: "I think it's 69"
                        },
                        {
                            author: "Anonymous",
                            timeAgo: "21 hours ago",
                            text: "Nice"
                        },
                        {
                            author: "Anonymous",
                            timeAgo: "20 hours ago",
                            text: "F for the fallen"
                        }
                    ]
                }
            ];
            
            return (
                <div className="min-h-screen">
                    <Header />
                    <main className="container mx-auto py-6 px-4">
                        <SearchBar />
                        <UserProfile />
                        <NewPostForm />
                        
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <h2 className="text-xl font-bold text-gray-800 mb-4">R Feed</h2>
                                <div className="space-y-4">
                                    {posts.map((post, index) => (
                                        <Post key={index} post={post} />
                                    ))}
                                </div>
                            </div>
                            
                            <div>
                                <h2 className="text-xl font-bold text-gray-800 mb-4">4chan Threads</h2>
                                <div className="space-y-4">
                                    {threads.map((thread, index) => (
                                        <Thread key={index} thread={thread} />
                                    ))}
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
